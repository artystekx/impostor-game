<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impostor - Gra online</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Ekran logowania/rejestracji -->
        <div id="auth-screen" class="screen active">
            <div class="panel">
                <div class="logo">
                    <i class="fas fa-user-secret"></i>
                </div>
                <h2>Impostor Game 2.0</h2>
                <p class="subtitle">Zaloguj się lub zarejestruj, aby grać!</p>
                
                <div id="login-section">
                    <h3><i class="fas fa-sign-in-alt"></i> Logowanie</h3>
                    <div class="input-group">
                        <label for="login-username">
                            <i class="fas fa-user"></i> Nazwa użytkownika:
                        </label>
                        <input type="text" id="login-username" placeholder="Twój login">
                    </div>
                    
                    <div class="input-group">
                        <label for="login-password">
                            <i class="fas fa-lock"></i> Hasło:
                        </label>
                        <input type="password" id="login-password" placeholder="Twoje hasło">
                    </div>
                    
                    <div class="button-group">
                        <button id="login-btn" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i> Zaloguj się
                        </button>
                        <button id="show-register-btn" class="btn btn-secondary">
                            <i class="fas fa-user-plus"></i> Rejestracja
                        </button>
                        <button id="guest-play-btn" class="btn btn-secondary">
                            <i class="fas fa-play"></i> Graj jako gość
                        </button>
                    </div>
                </div>
                
                <div id="register-section" style="display: none;">
                    <h3><i class="fas fa-user-plus"></i> Rejestracja</h3>
                    <div class="input-group">
                        <label for="register-username">
                            <i class="fas fa-user"></i> Nazwa użytkownika:
                        </label>
                        <input type="text" id="register-username" placeholder="Wybierz login">
                        <small>Min. 3 znaki, maks. 20 znaków</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="register-email">
                            <i class="fas fa-envelope"></i> E-mail (opcjonalnie):
                        </label>
                        <input type="email" id="register-email" placeholder="twój@email.pl">
                    </div>
                    
                    <div class="input-group">
                        <label for="register-password">
                            <i class="fas fa-lock"></i> Hasło:
                        </label>
                        <input type="password" id="register-password" placeholder="Wymyśl hasło">
                        <small>Min. 4 znaki (hasła nie są szyfrowane)</small>
                    </div>
                    
                    <div class="input-group">
                        <label for="register-password-confirm">
                            <i class="fas fa-lock"></i> Potwierdź hasło:
                        </label>
                        <input type="password" id="register-password-confirm" placeholder="Powtórz hasło">
                    </div>
                    
                    <div class="button-group">
                        <button id="register-btn" class="btn btn-success">
                            <i class="fas fa-check"></i> Zarejestruj się
                        </button>
                        <button id="show-login-btn" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i> Wróć do logowania
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ekran głównego menu (po zalogowaniu) -->
        <div id="main-menu-screen" class="screen">
            <div class="panel">
                <div class="user-header">
                    <div class="user-info">
                        <h2>Witaj, <span id="welcome-username">Graczu</span>!</h2>
                        <div class="user-stats">
                            <span class="stat-badge"><i class="fas fa-trophy"></i> Poziom: <span id="user-level">1</span></span>
                            <span class="stat-badge"><i class="fas fa-star"></i> Punkty: <span id="user-score">0</span></span>
                            <span class="stat-badge"><i class="fas fa-users"></i> Znajomi: <span id="user-friends">0</span></span>
                        </div>
                    </div>
                    <div class="user-actions">
                        <button id="profile-btn" class="btn btn-secondary btn-small">
                            <i class="fas fa-user"></i> Profil
                        </button>
                        <button id="logout-btn" class="btn btn-danger btn-small">
                            <i class="fas fa-sign-out-alt"></i> Wyloguj
                        </button>
                    </div>
                </div>
                
                <div class="main-options">
                    <div class="option-card" id="quick-play-card">
                        <div class="option-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h3>Szybka gra</h3>
                        <p>Dołącz do losowej gry</p>
                        <button id="quick-play-btn" class="btn btn-primary">
                            <i class="fas fa-play"></i> Graj
                        </button>
                    </div>
                    
                    <div class="option-card" id="create-game-card">
                        <div class="option-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <h3>Stwórz grę</h3>
                        <p>Utwórz własną grę z ustawieniami</p>
                        <button id="create-game-menu-btn" class="btn btn-primary">
                            <i class="fas fa-gamepad"></i> Stwórz
                        </button>
                    </div>
                    
                    <div class="option-card" id="join-game-card">
                        <div class="option-icon">
                            <i class="fas fa-sign-in-alt"></i>
                        </div>
                        <h3>Dołącz do gry</h3>
                        <p>Dołącz przez kod gry</p>
                        <button id="join-game-menu-btn" class="btn btn-primary">
                            <i class="fas fa-users"></i> Dołącz
                        </button>
                    </div>
                </div>
                
                <div class="secondary-options">
                    <button id="friends-btn" class="btn btn-secondary">
                        <i class="fas fa-users"></i> Znajomi
                    </button>
                    <button id="leaderboard-btn" class="btn btn-secondary">
                        <i class="fas fa-trophy"></i> Ranking
                    </button>
                    <button id="stats-btn" class="btn btn-secondary">
                        <i class="fas fa-chart-bar"></i> Statystyki
                    </button>
                    <button id="invitations-btn" class="btn btn-secondary">
                        <i class="fas fa-envelope"></i> Zaproszenia
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Ekran profilu użytkownika -->
        <div id="profile-screen" class="screen">
            <div class="panel">
                <div class="profile-header">
                    <h2><i class="fas fa-user-circle"></i> Twój profil</h2>
                    <button id="back-to-menu-btn" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Powrót
                    </button>
                </div>
                
                <div class="profile-content">
                    <div class="profile-info">
                        <div class="avatar-section">
                            <div class="avatar">
                                <i class="fas fa-user-secret"></i>
                            </div>
                            <h3 id="profile-username">Username</h3>
                            <p class="profile-rank" id="profile-rank">Nowicjusz</p>
                        </div>
                        
                        <div class="profile-stats">
                            <h4><i class="fas fa-chart-line"></i> Statystyki</h4>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <span class="stat-label">Rozegrane gry</span>
                                    <span class="stat-value" id="stat-total-games">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Wygrane</span>
                                    <span class="stat-value" id="stat-games-won">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Punkty</span>
                                    <span class="stat-value" id="stat-total-score">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Najlepszy wynik</span>
                                    <span class="stat-value" id="stat-best-score">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Jako impostor</span>
                                    <span class="stat-value" id="stat-impostor-wins">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Poziom</span>
                                    <span class="stat-value" id="stat-level">1</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-edit">
                        <h4><i class="fas fa-edit"></i> Edytuj profil</h4>
                        <div class="input-group">
                            <label for="edit-username">
                                <i class="fas fa-user"></i> Nowa nazwa użytkownika:
                            </label>
                            <input type="text" id="edit-username" placeholder="Nowy login">
                        </div>
                        
                        <div class="input-group">
                            <label for="edit-email">
                                <i class="fas fa-envelope"></i> E-mail:
                            </label>
                            <input type="email" id="edit-email" placeholder="nowy@email.pl">
                        </div>
                        
                        <div class="input-group">
                            <label for="edit-password">
                                <i class="fas fa-lock"></i> Nowe hasło (pozostaw puste aby nie zmieniać):
                            </label>
                            <input type="password" id="edit-password" placeholder="Nowe hasło">
                        </div>
                        
                        <div class="input-group">
                            <label for="edit-password-confirm">
                                <i class="fas fa-lock"></i> Potwierdź hasło:
                            </label>
                            <input type="password" id="edit-password-confirm" placeholder="Potwierdź hasło">
                        </div>
                        
                        <div class="button-group">
                            <button id="save-profile-btn" class="btn btn-success">
                                <i class="fas fa-save"></i> Zapisz zmiany
                            </button>
                            <button id="cancel-edit-btn" class="btn btn-secondary">
                                <i class="fas fa-times"></i> Anuluj
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ekran znajomych -->
        <div id="friends-screen" class="screen">
            <div class="panel">
                <div class="friends-header">
                    <h2><i class="fas fa-users"></i> Znajomi</h2>
                    <button id="friends-back-btn" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Powrót
                    </button>
                </div>
                
                <div class="friends-tabs">
                    <button class="tab-btn active" data-tab="friends-list">Lista znajomych</button>
                    <button class="tab-btn" data-tab="friend-requests">Prośby (<span id="requests-count">0</span>)</button>
                    <button class="tab-btn" data-tab="add-friend">Dodaj znajomego</button>
                </div>
                
                <div class="tab-content active" id="friends-list-tab">
                    <div id="friends-container" class="friends-container">
                        <!-- Lista znajomych będzie ładowana dynamicznie -->
                    </div>
                </div>
                
                <div class="tab-content" id="friend-requests-tab">
                    <div id="requests-container" class="requests-container">
                        <!-- Lista próśb będzie ładowana dynamicznie -->
                    </div>
                </div>
                
                <div class="tab-content" id="add-friend-tab">
                    <div class="add-friend-form">
                        <div class="input-group">
                            <label for="friend-username">
                                <i class="fas fa-user"></i> Nazwa użytkownika znajomego:
                            </label>
                            <input type="text" id="friend-username" placeholder="Wpisz login znajomego">
                        </div>
                        <button id="send-friend-request-btn" class="btn btn-primary">
                            <i class="fas fa-user-plus"></i> Wyślij prośbę
                        </button>
                        <p class="hint-text">Znajomy otrzyma powiadomienie i będzie mógł zaakceptować twoją prośbę.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ekran rankingu -->
        <div id="leaderboard-screen" class="screen">
            <div class="panel">
                <div class="leaderboard-header">
                    <h2><i class="fas fa-trophy"></i> Ranking graczy</h2>
                    <button id="leaderboard-back-btn" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Powrót
                    </button>
                </div>
                
                <div class="leaderboard-tabs">
                    <button class="lb-tab-btn active" data-lb-tab="score">Najwięcej punktów</button>
                    <button class="lb-tab-btn" data-lb-tab="wins">Najwięcej wygranych</button>
                    <button class="lb-tab-btn" data-lb-tab="impostor">Najlepsi impostorzy</button>
                </div>
                
                <div class="leaderboard-content active" id="score-leaderboard">
                    <div class="leaderboard-table">
                        <div class="table-header">
                            <div class="table-cell">Miejsce</div>
                            <div class="table-cell">Gracz</div>
                            <div class="table-cell">Punkty</div>
                            <div class="table-cell">Poziom</div>
                            <div class="table-cell">Ranga</div>
                        </div>
                        <div id="score-leaderboard-body">
                            <!-- Ranking punktów będzie ładowany dynamicznie -->
                        </div>
                    </div>
                </div>
                
                <div class="leaderboard-content" id="wins-leaderboard">
                    <div class="leaderboard-table">
                        <div class="table-header">
                            <div class="table-cell">Miejsce</div>
                            <div class="table-cell">Gracz</div>
                            <div class="table-cell">Wygrane</div>
                            <div class="table-cell">Wszystkie gry</div>
                            <div class="table-cell">% wygranych</div>
                        </div>
                        <div id="wins-leaderboard-body">
                            <!-- Ranking wygranych będzie ładowany dynamicznie -->
                        </div>
                    </div>
                </div>
                
                <div class="leaderboard-content" id="impostor-leaderboard">
                    <div class="leaderboard-table">
                        <div class="table-header">
                            <div class="table-cell">Miejsce</div>
                            <div class="table-cell">Gracz</div>
                            <div class="table-cell">Wygrane jako impostor</div>
                            <div class="table-cell">Gry jako impostor</div>
                            <div class="table-cell">% wygranych</div>
                        </div>
                        <div id="impostor-leaderboard-body">
                            <!-- Ranking impostorów będzie ładowany dynamicznie -->
                        </div>
                    </div>
                </div>
                
                <div class="leaderboard-footer">
                    <p>Łącznie graczy: <span id="total-players">0</span> | Łącznie gier: <span id="total-games">0</span></p>
                </div>
            </div>
        </div>
        
        <!-- Ekran statystyk -->
        <div id="stats-screen" class="screen">
            <div class="panel">
                <div class="stats-header">
                    <h2><i class="fas fa-chart-bar"></i> Twoje statystyki</h2>
                    <button id="stats-back-btn" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Powrót
                    </button>
                </div>
                
                <div class="detailed-stats">
                    <div class="stats-section">
                        <h3><i class="fas fa-gamepad"></i> Ogólne</h3>
                        <div class="stats-grid detailed">
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-calendar-alt"></i></div>
                                <div class="stat-info">
                                    <div class="stat-label">Dołączył</div>
                                    <div class="stat-value" id="stat-join-date">-</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-clock"></i></div>
                                <div class="stat-info">
                                    <div class="stat-label">Ostatnia gra</div>
                                    <div class="stat-value" id="stat-last-played">-</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-chart-pie"></i></div>
                                <div class="stat-info">
                                    <div class="stat-label">Wskaźnik wygranych</div>
                                    <div class="stat-value" id="stat-win-rate">0%</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-fire"></i></div>
                                <div class="stat-info">
                                    <div class="stat-label">Doświadczenie</div>
                                    <div class="stat-value" id="stat-experience">0 XP</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stats-section">
                        <h3><i class="fas fa-user-secret"></i> Jako Impostor</h3>
                        <div class="stats-grid detailed">
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-crown"></i></div>
                                <div class="stat-info">
                                    <div class="stat-label">Gry jako impostor</div>
                                    <div class="stat-value" id="stat-impostor-games">0</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-trophy"></i></div>
                                <div class="stat-info">
                                    <div class="stat-label">Wygrane jako impostor</div>
                                    <div class="stat-value" id="stat-impostor-wins-detailed">0</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon"><i class="fas fa-percentage"></i></div>
                                <div class="stat-info">
                                    <div class="stat-label">Skuteczność impostora</div>
                                    <div class="stat-value" id="stat-impostor-rate">0%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stats-section">
                        <h3><i class="fas fa-chart-line"></i> Postępy</h3>
                        <div class="progress-section">
                            <div class="progress-label">
                                <span>Poziom <span id="current-level">1</span></span>
                                <span><span id="current-xp">0</span>/<span id="next-level-xp">1000</span> XP</span>
                            </div>
                            <div class="progress-bar-large">
                                <div class="progress-fill-large" id="xp-progress" style="width: 0%"></div>
                            </div>
                            <div class="next-rank">
                                Następna ranga: <span id="next-rank">Ekspert</span> przy <span id="next-rank-xp">500</span> XP
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ekran zaproszeń -->
        <div id="invitations-screen" class="screen">
            <div class="panel">
                <div class="invitations-header">
                    <h2><i class="fas fa-envelope"></i> Zaproszenia do gier</h2>
                    <button id="invitations-back-btn" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Powrót
                    </button>
                </div>
                
                <div id="invitations-container" class="invitations-container">
                    <!-- Lista zaproszeń będzie ładowana dynamicznie -->
                    <div class="empty-state" id="no-invitations">
                        <i class="fas fa-envelope-open"></i>
                        <h3>Brak zaproszeń</h3>
                        <p>Nie masz aktualnie żadnych zaproszeń do gier.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Reszta istniejących ekranów (create, join, waiting, game, finalResults) pozostaje bez zmian -->
        <!-- ... -->
        
        <!-- Nowy ekran dla gry szybkiej -->
        <div id="quick-play-screen" class="screen">
            <div class="panel">
                <h2><i class="fas fa-bolt"></i> Szybka gra</h2>
                <p>Szukanie dostępnej gry...</p>
                
                <div class="searching-animation">
                    <div class="spinner"></div>
                    <p id="search-status">Łączenie z serwerem...</p>
                </div>
                
                <div class="quick-play-stats">
                    <p><strong>Aktywne gry:</strong> <span id="active-games-count">0</span></p>
                    <p><strong>Gracze online:</strong> <span id="online-players-count">0</span></p>
                </div>
                
                <div class="button-group">
                    <button id="cancel-quick-play-btn" class="btn btn-danger">
                        <i class="fas fa-times"></i> Anuluj
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Powiadomienie -->
        <div id="notification" class="notification"></div>
        
        <!-- Status połączenia -->
        <div id="connection-status" class="connection-status">
            <i class="fas fa-circle"></i> <span id="status-text">Łączenie...</span>
        </div>
        
        <!-- Nowe: Mini-profil w rogu -->
        <div id="mini-profile" class="mini-profile" style="display: none;">
            <div class="mini-avatar">
                <i class="fas fa-user"></i>
            </div>
            <div class="mini-info">
                <div class="mini-username" id="mini-username">Gracz</div>
                <div class="mini-score"><i class="fas fa-star"></i> <span id="mini-score">0</span></div>
            </div>
            <button id="mini-profile-btn" class="btn-icon">
                <i class="fas fa-chevron-down"></i>
            </button>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
    <script src="auth-client.js"></script>
    <script src="game-client.js"></script>
</body>
</html>
